{
  "entities": {
    "EventCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EventCategory",
      "type": "object",
      "description": "Represents a category of events that can be reported.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the EventCategory entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the event category."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the event category."
        },
        "icon": {
          "type": "string",
          "description": "Icon associated with the event category (e.g., a FontAwesome icon class or image URL)."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "icon"
      ]
    },
    "EventReport": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EventReport",
      "type": "object",
      "description": "Represents a report generated for a specific event category.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the EventReport entity."
        },
        "eventCategoryId": {
          "type": "string",
          "description": "Reference to EventCategory. (Relationship: EventCategory 1:N EventReport)"
        },
        "reportData": {
          "type": "string",
          "description": "The data associated with the event report. This is a string field, but can be formatted using JSON."
        },
        "createdDate": {
          "type": "string",
          "description": "Date the event report was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "eventCategoryId",
        "reportData",
        "createdDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/event_categories/{eventCategoryId}",
        "definition": {
          "entityName": "EventCategory",
          "schema": {
            "$ref": "#/backend/entities/EventCategory"
          },
          "description": "Stores event categories, each with an ID, name, description, and icon.",
          "params": [
            {
              "name": "eventCategoryId",
              "description": "Unique identifier for the event category."
            }
          ]
        }
      },
      {
        "path": "/event_reports/{eventReportId}",
        "definition": {
          "entityName": "EventReport",
          "schema": {
            "$ref": "#/backend/entities/EventReport"
          },
          "description": "Stores event reports, each associated with an event category via 'eventCategoryId'.",
          "params": [
            {
              "name": "eventReportId",
              "description": "Unique identifier for the event report."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to manage event categories and event reports effectively, focusing on simplicity and security. \n\n`event_categories` Collection:\nThis collection stores the available event categories. Each document represents a category with fields like 'name', 'description', and 'icon'.\n\n`event_reports` Collection:\nThis collection stores the reports associated with each event category. Each report is tied to a specific category using the 'eventCategoryId' field. It includes fields for 'reportData' and 'createdDate'.\n\nAuthorization Independence:\nAuthorization independence is achieved because there are no `get()` calls required in the security rules. The structure does not depend on data in parent documents to authorize access to child documents. Reports do not need to inherit any permissions from categories.\n\nQAPs Support:\nQAPs (Rules are not Filters) is inherently supported due to the flat structure and the absence of complex authorization rules. Listing operations can be securely performed on each collection without filtering based on user-specific attributes.\n\nThis design prioritizes clarity, simplicity, and security, aligning with the core design principles."
  }
}